# WebAPI

# 数据的表达

js 是一门 **命令式编程语言**，本质是处理数据

> 声明式语言：HTML、CSS、SQL

表达数据的方式：

- 变量
- 字面量
- 表达式

**标识符**：可以自主命名的部分，称标识符

> **常见标识符**：变量名、函数名、参数名

js 标识符命名规则：

- 允许数字、字母、下划线 `_`、`$` 符号

- 不允许数字开头
- 不能和关键字冲突
- 建议使用驼峰命名法
- 见名知意

**转义字符**

- `\'`：单引号

- `\"`：双引号
- `\r`：回车
- `\n`：换行

> **技巧**：常用 `\r\n` 表示换行

# 数据类型-对象

**原始类型**：`number`、`string`、`boolean`、`null`、`undefined`

**引用类型**：对象 ( 普通对象、数组、函数 )

**对象写法**：**属性名都是字符串**，使用单引号或双引号包裹

```javascript
var obj = {
    name: 'Jack',
    age: 18
};
```

> 当属性名是纯数字或符合规范时，可以省略引号

**读取属性**：

- 使用 `[]` 读取

  ```javascript
  obj['name'];
  ```

- 使用 `.` 读取

  ```javascript
  obj.name;
  ```

**数组的对象形式**：数组，本质上是一个对象

```javascript
let arr = {
    '0': 1,
    '1': 2,
    '2': 3,
    length: 3
}
```

# 数据运算

**算术运算符**：加 `+`、减 `-`、乘 `*`、除 `/`、余 `%`、乘方 `**`

> `+` / `-` 放在单个数据前时，表示正负

**字符串拼接**：当 `+` 两侧有一个是字符串时，变为字符串拼接

**赋值**：`=`、`+=`、`-=`、`*=`、`/=`、`%=`

> **注意**：赋值表达式始终返回赋值的结果，可以利用该特性实现连续赋值
>
> ```javascript
> a = b = 3;
> ```

**比较**：`==`、`===`、`!=`、`!==`、`>`、`>=`、`<`、`<=`

> 注意：
>
> - 实际开发中，根本不使用 `==` 和 `!=` ，而是取而代之的 `===` 和 `!==`
> - 比较运算符始终返回 boolean ，可以利用该特性完成赋值
>
> ```javascript
> // 源代码
> if(sex === 'male') {
>     user.isMale = true;
> } else {
>     user.isMale = false;
> }
> 
> // 简化后
> user.isMale === 'male';
> ```

**逻辑**：

- `!`：对后面的数据取反，返回 boolean

  > **隐式类型转换**：使用 `!` 双重取反

- `&&`：且；真真为真

  短路规则：返回最后一个判定的数据

  ```javascript
  // 原代码
  if(exp) {
      console.log(exp);
  }
  
  // 简化后
  exp && console.log(exp);
  ```

- `||`：或；假假为假

  短路规则：返回最后一个判定的数据

  ```javascript
  // 源代码
  if(exp) {
      n = exp;
  } else {
      n = 1;
  }
  
  // 简化后
  n = exp || 1;
  ```

- `??`：空值合并运算符；如果第一个参数不是 `null` / `undefined`，返回第一个参数否则返回第二个参数

- **三目运算符**：`? :`；格式： `a ? b : c`，`a` 为真返回 `b` 否则返回 `c`

  ```javascript
  // 通常用于替换简单的if结构
  if(exp) {
      n = 1;
  } else {
      n = 2;
  } 
  
  // 简化后
  n = exp ? 1 : 2;
  ```

**布尔判定**：`false`、`null`、`undefined`、`0`、`NaN`、`''` 返回 `false`；其余为 `true`

# 作用域

全局作用域、局部作用域、函数作用域

- 内部作用域访问外部会形成闭包
- 内部作用域访问外部取决于定义的位置，与调用位置无关

- 作用域内定义的变量、函数声明会提升到作用域顶部

# 全局对象

浏览器和 node 环境都存在一个全局对象

- 浏览器：`window` 

- node：`global`

特点：

- 全局对象的属性可以直接访问

- 给未声明的变量赋值，会给全局对象的变量的赋值

- 所有全局变量、全局函数都会被附加到全局对象中

  > 全局污染：也称 全局暴露
  >
  > 如果要避免全局污染，可以使用立即执行函数 ( IIFE, Immediately Invoked Function Expression ) 改变其作用域

# this

- 全局中的 `this`：指向 全局对象
- 函数中的 `this`：
  - 通过 `new` 关键字调用，指向新对象
  - 直接调用，指向全局对象
  - 通过对象调用，指向该对象
  - 通过 `call` 和 `apply` 调用，指向绑定的参数

# 原型链

所有对象通过 `new` 关键字创建

```javascript
let u1 = new User();

let u2 = {}; // 等价于 let u2 = new Object();
```

# 标准库

# 包装类

## Number

- `Number.NaN`：不存在的数字
- `Number.isNaN()`：判断传入值是否是 `NaN`
- `Number.isInteger()`：判断传入值是否为整数
- `Number.parseInt()`：将传入值转换为整数形式
- `Number.parseFloat()`：将传入值转换为小数形式
- `Number.prototype.toFixed(x)`：将当前数字保留指定小数位数返回
- `Number.prototype.toString()`：将当前数字转换为字符串返回